---
title: Optimizing Suborbital Salvage
layout: garden
status: seedling
planted: 2025-01-04T05:09:28Z
tended: 
---

# How the game is architected
- Major systems: graphic renderer, collision manager, entity manager
- Individual objects don't use OO - they're just tables of data that get iterated over every frame

# Switching from arrays to linked lists
This one surprised me. Usually I lean on arrays to leverage the speed boost granted by data locality. However when comparing performance of an array to a linked list, it made little difference when iterating collections. After learning this I decided switched to linked lists for all my performance critical collections to take advantage of faster additions and removals.

# Add/remove objects over time
Even with linked lists, adding/removing objects took a lot of time which resulted in hitches when loading/unloading new chunks. Solution was to spread adding/removing them over multiple frames.

# Exposing a collidable flag
Many chunks had overlapping objects, which means some of those colliders were redundant. Exposed flag to reduce amount of colliders.

# Only check colliders that are immediately around the player
- Player doesn't move along the x, so we can limit collision checks to area around player.
- Player has three circle colliders and an larger collider
  - Larger collider is checked first before examining collisions with smaller colliders

# Limiting function use in performance critical areas
- Leveraging macros from Playbit to inline functions.
- use `image[frame]` instead of `image:getFrame(frame)`

# Small wins

- Limiting function use in performance critical areas. Leveraging macros from Playbit.
- Saving table properties to a local variable when accessed more than once.